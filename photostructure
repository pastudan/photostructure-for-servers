#!/usr/bin/env node
/* Copyright Â© 2021, PhotoStructure Inc. */
/* By using this software, you accept the terms in <https://photostructure.com/eula>. */
/* If you don't accept them, do not use this software. */
var E=Object.create,y=Object.defineProperty,w=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty,D=Object.getOwnPropertyNames,V=Object.getOwnPropertyDescriptor;var F=e=>y(e,"__esModule",{value:!0});var I=(e,n,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of D(n))!L.call(e,r)&&r!=="default"&&y(e,r,{get:()=>n[r],enumerable:!(t=V(n,r))||t.enumerable});return e},T=e=>I(F(y(e!=null?E(w(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var c=T(require("commander")),U=T(require("process"));var B=T(require("process"));function u(e){return e==null?"":typeof e=="string"?e:Array.isArray(e)?e.map(u).join(","):e.toString()}var v;(function(e){e[e.Empty=0]="Empty",e[e.Primitive=1]="Primitive",e[e.Symbol=2]="Symbol",e[e.Object=3]="Object",e[e.Array=4]="Array",e[e.Iterable=5]="Iterable",e[e.Instance=6]="Instance",e[e.Function=7]="Function",e[e.Unknown=8]="Unknown"})(v||(v={}));var d;(function(i){i.isDefined=!1,i.isEmpty=!0,i.get=()=>{},i.exists=()=>!1;let o=()=>i;i.map=o,i.flatMap=o,i.filter=o,i.forEach=o,i.getOrElse=b=>b(),i.orElse=b=>a(b()),i.zip1=o,i.zip2=o,i.zip3=o})(d||(d={}));var O=d,s=class{constructor(n){this.a=n;this.isDefined=!0;this.isEmpty=!1}get(){return this.a}exists(n){return n(this.a)}map(n){return new s(n(this.a))}flatMap(n){let t=n(this.a);return P(t)?t:a(t)}filter(n){return a(n(this.a)?this.a:void 0)}forEach(n){return n(this.a),this}getOrElse(){return this.a}orElse(){return this}zip1(n,t){return a(n).flatMap(r=>t(this.a,r))}zip2(n,t,r){return a(n).flatMap(o=>a(t).flatMap(p=>r(this.a,o,p)))}zip3(n,t,r,o){return a(n).flatMap(p=>a(t).flatMap(M=>a(r).flatMap(h=>o(this.a,p,M,h))))}};function P(e){return e instanceof s||e===O}function a(e){return P(e)?e:e!=null?new s(e):O}function N(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}var m=e=>(n,t)=>N(n)&&N(t)&&e(n,t),Re=m((e,n)=>e<n),ze=m((e,n)=>e<=n),qe=m((e,n)=>e>n),je=m((e,n)=>e>=n);function k(e,n=[]){if(e==null)return n;for(let t of e)if(t!=null)if(Array.isArray(t))for(let r of t)r!=null&&n.push(r);else n.push(t);return n}function W(e,n){return e=u(e),n=u(n),e.startsWith(n)?e:n+e}var K=/\r?\n/gm;function $(e,n,t){t==null&&(t=e.length);for(let r=t;r>=0;r--)if(e.substr(r).startsWith(n))return r;return-1}function f(e,n={maxLineLen:75,prefix:""}){if(e.includes(`
`))return k(e.split(K).map(r=>f(r,n)));if(e=W(u(e),n.prefix).trim(),e.length<=n.maxLineLen)return[e];let t=$(e," ",n.maxLineLen);if(t>n.prefix.length)return[e.slice(0,t),...f(e.slice(t+1),n)];{let r=e.indexOf(" ",n.prefix.length+1);return r>0&&r<e.length-1?[e.slice(0,r),...f(e.slice(r+1),n)]:[e]}}var J=new Date().getFullYear(),Y=`Please visit <https://photostructure.com/support/> for detailed usage and configuration instructions.

Copyright \xA9 2017-${J}, PhotoStructure Inc.

Running this software indicates your agreement to all the terms of this license: <https://photostructure.com/eula/>`,l={main:"PhotoStructure's main process manager. Runs and manages web and sync services.",info:"Configuration, file metadata and import diagnostics tool. ",list:"List all paths in a Library.",logcat:"Chronologically sort and pretty-print PhotoStructure logfiles.",logtail:"View the log messages of currently-running PhotoStructure processes. (Like `tail -f`).",web:"PhotoStructure's web service. Automatically started by main.",sync:"PhotoStructure's directory synchronization service. Automatically started by main.","sync-file":"PhotoStructure's file synchronization service. Automatically started by sync."};function S(e){return e.on("--help",()=>{console.log(`
`+f(Y,{maxLineLen:B.stdout.columns??78,prefix:""}).join(`
`)+`
`)})}var C="1.0.0-alpha.1";var zn=new Date(1615764034e3);c.program.version(C);c.program.description("Welcome to PhotoStructure, your new home for all your photos and videos.");S(c.program).command("main",l.main+" (default)",{isDefault:!0,executableFile:"bin/main.js"}).command("info",l.info,{executableFile:"bin/info.js"}).command("list",l.list,{executableFile:"bin/list.js"}).command("logcat",l.logcat,{executableFile:"bin/logcat.js"}).command("logtail",l.logtail,{executableFile:"bin/logtail.js"}).command("web",l.web,{executableFile:"bin/web.js"}).command("sync",l.sync,{executableFile:"bin/sync.js"}).command("sync-file",l["sync-file"],{executableFile:"bin/sync-file.js"}).parse(U.argv);
//# sourceMappingURL=photostructure.js.map
